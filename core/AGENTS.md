# /core — Runtime & CLI Hub
> **File Modification Guardrails**
> - Do not create, modify, or delete anything under any `dist/` directory.
> - Never touch: `packages/**/dist/**`, `build/**`, `out/**`.
> - Only edit files in `src/`, `scripts/`, `proto/`, `config`, or test paths.


**Purpose.** Houses the TypeScript runtime, flow compiler, and CLI that back the
Electron app. Everything here is ESM and must obey the free/offline guardrails
from the root `Agents.md`.

The pipeline lives entirely here: Build consumes the renderer's `FlowGraph`
protobuf, runs the compiler passes, and emits a deterministic `CompiledFlow`
protobuf that the runtime executes. Run paths (CLI and Electron) must accept
only that compiled artifact.

**Key subfolders**
- `src/` — Source TypeScript. See `core/src/AGENTS.md` for a deeper breakdown.
- `protos/` — Generated protobuf output (`proto:gen` overwrites these).
- `scripts/` — Helper scripts (e.g., `gen-proto.ts`).
- `test/` — Vitest specs that exercise runtime pieces.
- `dist/` — Build artefacts generated by `pnpm --filter @voide/core build`.

**Common tasks**
- Type-check/build: `pnpm --filter @voide/core build`
- Run tests: `pnpm --filter @voide/core test`
- Regenerate protobuf bindings: `pnpm --filter @voide/core proto:gen`

**Gotchas**
- Stay offline; adapters that would hit the network must be stubbed.
- Generated code lives under `protos/` — do not hand-edit.
- Keep CLI entrypoint `src/cli.ts` lean; heavy logic belongs in `src/runtime/`.

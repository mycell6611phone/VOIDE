version: 1
summary: VOIDE runtime smoke coverage
scenarios:
  - name: CLI validates smoke flow
    steps:
      - run: pnpm voide validate flows/smoke.flow.json
        expect:
          exit_code: 0
  - name: CLI packs and runs smoke flow with stub provider
    steps:
      - run: pnpm voide pack flows/smoke.flow.json --out /tmp/smoke.flow.pb
        expect:
          exit_code: 0
      - run: pnpm voide run /tmp/smoke.flow.pb --provider stub --input input="Hello from smoke"
        expect:
          exit_code: 0
          stdout_contains:
            - DONE
            - '"output"'
  - name: Core unit tests stay green
    steps:
      - run: pnpm --filter @voide/core test
        expect:
          exit_code: 0
